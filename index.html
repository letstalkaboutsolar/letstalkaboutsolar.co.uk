<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Let’s Talk About Solar</title>
  <meta name="description" content="Clear, friendly, and honest solar advice for UK homeowners. Discover real savings, trusted installers, and smart solar tools." />
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #338abf;
      --secondary: #eaf9ff;
      --accent: #ffd700;
      --background: #f4fbff;
      --card: #fff;
      --text: #2c3e50;
      --radius: 20px;
      --shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      --gradient-glow: radial-gradient(circle at 30% 70%, #ffe066 0%, #338abf 100%);
      --hero-gradient: linear-gradient(120deg, #338abf 0%, #72bcd4 100%);
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--background);
      font-family: 'Patrick Hand', cursive;
      color: var(--text);
      scroll-behavior: smooth;
    }
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      background: var(--card);
      box-shadow: var(--shadow);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
      transition: top 0.3s;
      height: auto;
      backdrop-filter: blur(7px);
    }
    nav.hidden { top: -100px; }
    .logo { font-size: 1.5rem; font-weight: bold; color: var(--primary); letter-spacing: 0.02em;}
    nav ul {
      list-style: none;
      display: flex;
      gap: 1.5rem;
      margin: 0;
      padding: 0;
    }
    nav ul li a {
      text-decoration: none;
      color: var(--text);
      font-size: 1.1rem;
      padding: 0.5rem 0.8rem;
      border-radius: 999px;
      transition: background 0.18s, color 0.18s, box-shadow 0.2s;
    }
    nav ul li a.cta-nav {
      background: var(--primary);
      color: white;
      box-shadow: 0 2px 10px #b9e3fa7e;
    }
    nav ul li a:hover,
    nav ul li a.cta-nav:hover {
      background: var(--secondary);
      color: var(--primary);
      box-shadow: 0 2px 10px #ffd7002c;
    }
    .hero {
      padding: 4rem 2rem 2rem;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      background: var(--hero-gradient);
      margin-top: 72px;
      border-radius: 0 0 var(--radius) var(--radius);
      box-shadow: 0 6px 32px #b9e3fa38;
      position: relative;
      overflow: hidden;
      min-height: 320px;
    }
    .hero-text {
      max-width: 600px;
      padding: 1rem 2rem;
      background: rgba(255,255,255,0.67);
      border-radius: var(--radius);
      box-shadow: 0 4px 36px #338abf36;
      z-index: 1;
      backdrop-filter: blur(2px);
    }
    .hero-text h1 {
      font-size: 2.4rem;
      color: var(--primary);
      margin: 0 0 1rem;
      text-shadow: 0 2px 16px #ffe0663a;
    }
    .hero-text p {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    .cta {
      background: var(--primary);
      color: white;
      padding: 0.75rem 1.5rem;
      text-decoration: none;
      border-radius: 999px;
      font-size: 1rem;
      display: inline-block;
      box-shadow: 0 2px 10px #b9e3fa7e;
      transition: transform 0.13s;
    }
    .cta:hover { transform: scale(1.04);}
    .section { padding: 3rem 1rem; text-align: center; position: relative; }
    .benefit-cards, .trust-logos {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      margin-top: 2rem;
    }
    .benefit-card, .trust-logo {
      background: var(--card);
      padding: 1.5rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow), 0 8px 30px #b9e3fa14;
      max-width: 250px;
      transition: transform 0.14s, box-shadow 0.18s, background 0.14s;
    }
    .benefit-card:hover, .trust-logo:hover {
      transform: translateY(-7px) scale(1.03);
      box-shadow: 0 8px 30px #ffd7002a, 0 2px 8px #b9e3fa3a;
      background: #eaf9ff;
    }
    .benefit-card img, .trust-logo img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      margin-bottom: 1rem;
      filter: drop-shadow(0 4px 8px #ffe06648);
      background: #fff;
      border-radius: 15px;
      border: 3px solid #eaf9ff;
    }
    .calculator, .quote-form {
      max-width: 500px;
      margin: 0 auto;
      background: var(--card);
      padding: 2rem;
      border-radius: var(--radius);
      box-shadow: var(--shadow), 0 8px 30px #b9e3fa14;
      position: relative;
      z-index: 1;
    }
    .calculator:before, .quote-form:before {
      content: "";
      position: absolute;
      left: 0; top: 0; right: 0; bottom: 0;
      background: var(--gradient-glow);
      opacity: 0.10;
      z-index: 0;
      filter: blur(20px);
      border-radius: var(--radius);
    }
    label, input, button, select {
      display: block;
      width: 100%;
      font-size: 1rem;
      margin-top: 1rem;
      font-family: 'Patrick Hand', cursive;
    }
    input, select {
      padding: 0.6rem;
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #f7fdff;
      box-shadow: 0 2px 8px #e3f0fc;
    }
    input:focus, select:focus {
      outline: 2px solid var(--primary);
      border-color: var(--primary);
    }
    #rate { box-shadow: 0 2px 8px #e3f0fc; }
    button {
      background: var(--primary);
      color: white;
      padding: 0.75rem;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      font-size: 1.05rem;
      margin-top: 1.6rem;
      box-shadow: 0 2px 10px #b9e3fa7e;
      transition: background 0.13s, transform 0.12s;
    }
    button:hover { background: var(--accent); color: var(--primary); transform: scale(1.04);}
    #solar-toolkit {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      justify-content: center;
      align-items: flex-start;
      text-align: left;
    }
    #solar-toolkit > div {
      flex: 1 1 320px;
      min-width: 280px;
      max-width: 450px;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow), 0 8px 30px #b9e3fa14;
      padding: 2rem;
      margin-bottom: 0;
    }
    #solar-toolkit h2 {
      text-align: center;
    }
    @media (max-width: 950px) {
      #solar-toolkit {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
      }
      #solar-toolkit > div {
        margin: 0 auto 2rem auto;
      }
    }
    #news-list {
      list-style: none;
      max-width: 700px;
      margin: 1.3rem auto 0 auto;
      padding: 0 0.6em;
      font-size: 1.05rem;
      color: #2c3e50;
    }
    #news-list li {
      margin-bottom: 1.1em;
      line-height: 1.5;
      border-bottom: 1px solid #e3f0fc;
      padding-bottom: 0.6em;
      background: #f4fbff;
      padding-left: 0.5em;
      border-radius: 10px;
    }
    #news-list a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 600;
      transition: color 0.14s;
    }
    #news-list a:hover {
      color: #155a92;
      text-decoration: underline;
    }
    #news-list span {
      color: #888;
      font-size: 0.93em;
    }
    .animated-accent {
      position: absolute;
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: linear-gradient(120deg, #ffe066 0%, #338abf 90%);
      filter: blur(42px);
      opacity: 0.18;
      animation: accentMove 8s infinite alternate;
      z-index: 0;
    }
    @keyframes accentMove {
      from { left: 15%; top: 55%; }
      to { left: 65%; top: 10%; }
    }
    footer {
      background: var(--primary);
      color: white;
      padding: 2rem;
      text-align: center;
      margin-top: 3rem;
      border-radius: var(--radius) var(--radius) 0 0;
      font-size: 0.9rem;
      box-shadow: 0 -2px 24px #b9e3fa21;
    }
    @media (max-width: 600px) {
      nav {
        padding: 0.4rem 0.7rem;
        background: rgba(255,255,255,0.97);
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        height: auto;
      }
      .logo {
        font-size: 1rem;
        padding: 0.2rem 0;
      }
      nav ul {
        gap: 0.8rem;
        overflow-x: auto;
        white-space: nowrap;
        flex-wrap: nowrap;
      }
      nav ul li a {
        font-size: 0.95rem;
        padding: 0.3rem 0.7rem;
      }
      nav ul li a.cta-nav {
        padding: 0.35rem 0.8rem;
      }
      .hero {
        padding: 2.2rem 0.5rem 1rem 0.5rem;
        margin-top: 56px;
      }
      .hero-text h1 {
        font-size: 1.2rem;
      }
      .benefit-cards, .trust-logos {
        flex-direction: column;
        align-items: center;
        gap: 1.2rem;
      }
      .benefit-card, .trust-logo {
        max-width: 98vw;
        padding: 1.2rem 0.7rem;
      }
      .section {
        padding: 1.6rem 0.2rem;
      }
      #solar-toolkit {
        flex-direction: column;
        align-items: stretch;
        text-align: center;
      }
      #solar-toolkit > div {
        margin: 0 auto 2rem auto;
      }
      .animated-accent {
        display: none;
      }
    }
  </style>
</head>
<body>
  <nav id="navbar">
    <div class="logo">Let’s Talk About Solar</div>
    <ul>
      <li><a href="#hero">Home</a></li>
      <li><a href="#benefits">Why Solar?</a></li>
      <li><a href="#solar-toolkit">Orientation</a></li>
      <li><a href="#solar-toolkit">Savings</a></li>
      <li><a href="#trust">Trust</a></li>
      <li><a href="#quote" class="cta-nav">Get Quote</a></li>
    </ul>
  </nav>

  <section class="hero" id="hero">
    <span class="animated-accent" style="left:10%;top:60%;"></span>
    <div class="hero-text">
      <h1>Sunshine Meets Smart Savings</h1>
      <p>See how solar can protect your bills and power your future.</p>
      <a href="#quote" class="cta">Get My Free Quote</a>
    </div>
  </section>

  <section id="benefits" class="section">
    <span class="animated-accent" style="left:70%;top:20%;"></span>
    <h2>Why Solar?</h2>
    <div class="benefit-cards">
      <div class="benefit-card">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Money saving GBP icon">
        <p>Save money on your bills from day one.</p>
      </div>
      <div class="benefit-card">
        <img src="https://cdn-icons-png.flaticon.com/512/3103/3103446.png" alt="Battery storage icon">
        <p>Store your sunshine with battery technology.</p>
      </div>
      <div class="benefit-card">
        <img src="https://cdn-icons-png.flaticon.com/512/2422/2422625.png" alt="Pylon selling to grid icon">
        <p>Sell your surplus energy back to the grid.</p>
      </div>
    </div>
  </section>

  <section id="solar-toolkit" class="section">
    <div>
      <h2>Check Your Roof Orientation</h2>
      <p>Enter your address to estimate your solar potential.</p>
      <input id="addressInput" type="text" placeholder="Enter your address" style="max-width:350px;margin:0 auto 1rem auto;display:block;" autocomplete="off" />
      <button id="toggleMapBtn" type="button" style="margin:1rem 0 1.2rem 0;padding:0.7rem 1.3rem;border-radius:999px;background:#338abf;color:#fff;font-weight:bold;font-size:1rem;border:none;box-shadow:0 2px 8px rgba(114,188,212,0.07);cursor:pointer;" disabled>
        Show Street View
      </button>
      <div id="streetview-container" style="width:100%;max-width:400px;height:200px;display:none;border-radius:18px;overflow:hidden;margin:0 auto 1rem auto;background:#f4fbff;">
        <div id="pano" style="width:100%;height:100%;"></div>
      </div>
      <p id="orientationResult" style="margin-top: 1rem; font-weight: bold;">For live address autocomplete, <a href="https://developers.google.com/maps/documentation/javascript/place-autocomplete-element/overview" target="_blank">migrate to PlaceAutocompleteElement</a> (Maps API v3 Autocomplete is now deprecated for new customers).</p>
    </div>
    <div>
      <h2>Solar Savings Calculator</h2>
      <form id="calcForm" class="calculator" autocomplete="off">
        <label for="rate">Electricity unit rate (p/kWh):</label>
        <input type="number" id="rate" placeholder="e.g. 25" required step="any">
        <label for="usage">Annual electricity usage (kWh):</label>
        <input type="number" id="usage" placeholder="e.g. 4000" required step="any">
        <label><input type="checkbox" id="battery"> Include battery?</label>
        <button type="submit">Calculate</button>
      </form>
      <div id="calcResult"></div>
      <p style="font-size: 0.8rem; margin-top: 1rem; color: gray;">
        This calculation is based on a system with 9 solar panels – if your roof can fit more, your potential savings will be even higher. These are estimated figures and don’t include what you would be exporting per year on top of savings. For a free comprehensive breakdown, fill in the free quote form.
      </p>
    </div>
  </section>

  <section id="energy-news" class="section">
    <h2>Latest UK News Headlines</h2>
    <ul id="news-list"><li>Loading news...</li></ul>
    <p style="font-size:0.9rem;color:gray;margin-top:0.5rem;">
      News provided by NewsAPI.org.<br>
      For the most up-to-date information, check back here regularly.
    </p>
  </section>

  <section id="historic-prices" class="section">
    <button onclick="toggleHistoric()" style="font-size:1.1rem;padding:0.5rem 1.5rem;background:#338abf;color:#fff;border:none;border-radius:20px;cursor:pointer;">
      Show Historic Electricity Prices (2000-2025)
    </button>
    <div id="historic-graph" style="display:none;margin-top:2rem;">
      <canvas id="pricesChart" width="400" height="200"></canvas>
      <p style="font-size:0.9rem;color:gray;">
        Sources: 
        <a href="https://www.gov.uk/government/statistical-data-sets/annual-domestic-energy-price-statistics" target="_blank">UK Government</a>, 
        <a href="https://www.ons.gov.uk/economy/inflationandpriceindices/datasets/consumerpriceindices" target="_blank">Office for National Statistics (ONS)</a>, 
        <a href="https://www.ofgem.gov.uk/energy-data-and-research/data-portal/retail-market-indicators" target="_blank">Ofgem</a>
      </p>
    </div>
  </section>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <section id="trust" class="section">
    <h2>Who Can You Trust?</h2>
    <div class="trust-logos">
      <a class="trust-logo" href="https://mcscertified.com/" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3c/MCS_Certification_logo.svg/320px-MCS_Certification_logo.svg.png" alt="MCS Certified" />
        <p><strong>MCS</strong>: Quality guaranteed equipment and installers.</p>
      </a>
      <a class="trust-logo" href="https://www.epvs.co.uk/" target="_blank">
        <img src="https://www.epvs.co.uk/wp-content/themes/epvs/assets/img/logo.png" alt="EPVS" />
        <p><strong>EPVS</strong>: Verified energy savings and performance claims.</p>
      </a>
      <a class="trust-logo" href="https://www.hiesscheme.org.uk/" target="_blank">
        <img src="https://www.hiesscheme.org.uk/wp-content/uploads/2018/10/hies-cc-logo-2.png" alt="HIES" />
        <p><strong>HIES</strong>: Consumer protection from start to finish.</p>
      </a>
      <a class="trust-logo" href="https://www.napit.org.uk/" target="_blank">
        <img src="https://www.napit.org.uk/images/napit_logo.png" alt="NAPIT" />
        <p><strong>NAPIT</strong>: Government-approved installer certification.</p>
      </a>
      <a class="trust-logo" href="https://www.tradingstandards.uk/" target="_blank">
        <img src="https://seeklogo.com/images/T/trading-standards-uk-logo-D8D8D8E1FE-seeklogo.com.png" alt="Trading Standards" />
        <p><strong>Trading Standards</strong>: Ensuring legal and fair business practices.</p>
      </a>
      <a class="trust-logo" href="https://www.trustmark.org.uk/" target="_blank">
        <img src="https://www.trustmark.org.uk/images/default-source/default-album/tm_primary_logo_rgb.jpg?sfvrsn=2" alt="TrustMark" />
        <p><strong>Government TrustMark</strong>: The only government-endorsed quality scheme for trades in and around the home.</p>
      </a>
      <a class="trust-logo" href="https://register.fca.org.uk/" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/16/Financial_Conduct_Authority_logo.svg/320px-Financial_Conduct_Authority_logo.svg.png" alt="FCA" />
        <p><strong>FCA</strong>: Regulated advice and consumer financial protection.</p>
      </a>
    </div>
  </section>

  <section id="quote" class="section">
    <h2>Request a Free Quote</h2>
    <form action="https://formspree.io/f/mldnarjp" method="POST" class="quote-form" autocomplete="off">
      <input type="text" name="name" placeholder="Full Name" required autocomplete="name">
      <input type="text" name="address" id="quote-address" placeholder="Start typing your address…" required autocomplete="street-address">
      <input type="email" name="email" placeholder="Email Address" required autocomplete="email">
      <input type="tel" name="phone" placeholder="Phone Number" required autocomplete="tel">
      <input type="text" name="unitrate" placeholder="Electricity Unit Rate (p/kWh)" required>
      <input type="text" name="annualspend" placeholder="Annual Electricity Spend (£)" required>
      <button type="submit">Send My Quote Request</button>
    </form>
  </section>

  <footer>
    <p>&copy; 2025 Let’s Talk About Solar. All rights reserved.</p>
  </footer>

  <!-- MAIN SCRIPTS -->
  <script>
    // Navbar hide on scroll
    let orientationFactor = 0.9;
    let lastScroll = 0;
    const nav = document.getElementById("navbar");

    window.addEventListener("scroll", () => {
      const currentScroll = window.pageYOffset;
      nav.classList.toggle("hidden", currentScroll > lastScroll);
      lastScroll = currentScroll;
    });

    document.addEventListener("DOMContentLoaded", function () {
      // Solar Savings Calculator
      var calcForm = document.getElementById("calcForm");
      if (calcForm) {
        calcForm.addEventListener("submit", function (e) {
          e.preventDefault();
          const rate = parseFloat(document.getElementById("rate").value); // pence per kWh
          const usage = parseFloat(document.getElementById("usage").value); // annual usage in kWh
          const battery = document.getElementById("battery").checked;

          // Validate input
          if (isNaN(rate) || rate <= 0 || isNaN(usage) || usage <= 0) {
            document.getElementById("calcResult").innerHTML =
              "<p style='color:red'>Please enter valid numbers for your unit rate and annual usage.</p>";
            return;
          }

          // 9 x 460W panels = 4.14kWp, limited by 3.68kW inverter
          const systemSizeKW = 3.68;
          const panelSystemKW = 9 * 0.46; // 4.14kW, but limited by inverter
          const kwhPerKWp = 1050;
          const orientation = typeof orientationFactor === "number" && orientationFactor > 0 ? orientationFactor : 0.9;
          const estimatedAnnualGen = Math.min(systemSizeKW, panelSystemKW) * kwhPerKWp * orientation;

          // Battery settings
          let usableBatteryKWh = 0;
          let batterySelfUse = 0;
          if (battery) {
            usableBatteryKWh = 5 * 0.9 * 0.9; // 4.05kWh
            batterySelfUse = Math.min(estimatedAnnualGen, usableBatteryKWh * 365);
          }

          let selfConsumptionRatio = battery ? 0.90 : 0.65;
          let selfUsedKWh = estimatedAnnualGen * selfConsumptionRatio;
          let billReductionKWh = Math.min(selfUsedKWh, usage);
          let savings = billReductionKWh * (rate / 100);

          document.getElementById("calcResult").innerHTML =
            `<p><strong>Estimated annual solar generation:</strong> ${estimatedAnnualGen.toFixed(0)} kWh<br>
            <strong>Annual bill savings:</strong> £${savings.toFix